(function(){"use strict";var e={5347:function(e,t,n){var o={};n.r(o),n.d(o,{IsShowTabBar:function(){return Ee},getLocalItem:function(){return Ke}});var a={};n.r(a),n.d(a,{SelectTabBar:function(){return $e},setDatabase:function(){return ze},setLocalItem:function(){return Je},setRefreshListState:function(){return qe}});var c={};n.r(c),n.d(c,{addNote:function(){return ut},delNote:function(){return gt},getNoteById:function(){return rt},getNoteListByPage:function(){return ft},getNoteListNearMonth:function(){return st},hasNoteOnYearMonthDate:function(){return bt},startupDatabase:function(){return mt},updateNote:function(){return dt},updateNoteSort:function(){return ht}});n(7225);var l=n(8596),r=(n(3405),n(1855)),b=(n(9292),n(147)),f=(n(1557),n(6035)),i=(n(5708),n(6305)),s=(n(6349),n(9305)),u=(n(51),n(9545)),d=(n(9307),n(257)),h=(n(3249),n(8985)),g=(n(8829),n(3812)),m=(n(4165),n(3649)),p=(n(2471),n(3739)),v=(n(2097),n(9420)),w=(n(7461),n(4250)),y=(n(9041),n(5331)),S=(n(563),n(4821)),I=(n(4035),n(1441)),D=(n(9247),n(6056)),C=(n(3081),n(3805)),T=(n(5086),n(4521)),x=(n(8386),n(5258)),N=n(9242),k=n(3396);const M=(0,k.Uk)("笔记"),L=(0,k.Uk)("添加"),Y=(0,k.Uk)("日历"),P=(0,k.Uk)("设置");function O(e,t,n,o,a,c){const l=(0,k.up)("router-view"),r=(0,k.up)("van-tabbar-item"),b=(0,k.up)("van-tabbar");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k.Wm)(l,null,{default:(0,k.w5)((({Component:e})=>[((0,k.wg)(),(0,k.j4)(k.Ob,null,[((0,k.wg)(),(0,k.j4)((0,k.LL)(e)))],1024))])),_:1}),(0,k.Wm)(l,{name:"NewNote"}),(0,k.Wm)(l,{name:"SearchNote"},{default:(0,k.w5)((({Component:e})=>[((0,k.wg)(),(0,k.j4)(k.Ob,null,[((0,k.wg)(),(0,k.j4)((0,k.LL)(e)))],1024))])),_:1}),(0,k.wy)((0,k.Wm)(b,{route:""},{default:(0,k.w5)((()=>[(0,k.Wm)(r,{icon:"notes-o",to:"/"},{default:(0,k.w5)((()=>[M])),_:1}),(0,k.Wm)(r,{icon:"plus",to:"/AddNote"},{default:(0,k.w5)((()=>[L])),_:1}),(0,k.Wm)(r,{icon:"calendar-o",to:"/Calendar"},{default:(0,k.w5)((()=>[Y])),_:1}),(0,k.Wm)(r,{icon:"setting-o",to:"/Setting"},{default:(0,k.w5)((()=>[P])),_:1})])),_:1},512),[[N.F8,e.IsShowTabBar]])],64)}n(767);var Z=n(7619),A=n(4870),_=n(678),F=n(65);function R(){return new Promise(((e,t)=>{FingerprintAuth.isAvailable((n=>{if(n.isAvailable){var o={clientId:"com.github.topcoder520_debug",usename:"myUsername",password:"myPassword",disableBackup:!1,maxAttempts:"5",locale:"zh_CN",userAuthRequired:"false",dialogTitle:"指纹验证",dialogMessage:"请触摸指纹传感器",dialogHint:"本次验证不会保存您的指纹信息"};FingerprintAuth.encrypt(o,(t=>{e(t)}),(e=>{t({code:3,msg:"指纹解锁授权失败"})}))}else t({code:2,msg:"指纹解锁不可用"})}),(e=>{t({code:1,msg:e})}))}))}var V={setup(){const e=(0,_.tv)(),t=(0,A.iH)(0),n=(0,F.oR)();(0,k.bv)((()=>{n.dispatch("startupDatabase").then((()=>{o().then((t=>{console.log("flag",t),"true"==t?(console.log("开启指纹解锁"),R().then((t=>{console.log("FingerprintVerification"+JSON.stringify(t)),e.push({path:"/"})})).catch((e=>{console.log("FingerprintVerification",JSON.stringify(e)),3==e.code?navigator.app.exitApp():(0,Z.Z)(e.msg)}))):(console.log("不不不开启指纹解锁"),e.push({path:"/"}))}))})).catch((e=>{console.log("startupDatabase-err=>"+e)}))}));const o=async()=>await n.getters.getLocalItem(n.state.localFingerKey);return{active:t}},computed:{...(0,F.Se)(["IsShowTabBar"])}},W=n(89);const H=(0,W.Z)(V,[["render",O]]);var B=H,j=n(7139);const U={class:"van-multi-ellipsis--l3"},E={class:"top-tag"};function K(e,t,n,o,a,c){const l=(0,k.up)("van-nav-bar"),r=(0,k.up)("van-button"),b=(0,k.up)("van-col"),f=(0,k.up)("van-row"),i=(0,k.up)("van-swipe-cell"),s=(0,k.up)("van-list"),u=(0,k.up)("van-pull-refresh");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k.wy)((0,k.Wm)(l,{title:"笔记"},null,512),[[N.F8,o.showNavbar]]),(0,k.Wm)(u,{modelValue:o.Refresh,"onUpdate:modelValue":t[1]||(t[1]=e=>o.Refresh=e),onRefresh:o.onRefresh},{default:(0,k.w5)((()=>[(0,k.Wm)(s,{loading:o.loading,"onUpdate:loading":t[0]||(t[0]=e=>o.loading=e),finished:o.finished,"finished-text":"没有更多了",onLoad:o.onLoad},{default:(0,k.w5)((()=>[((0,k.wg)(!0),(0,k.iD)(k.HY,null,(0,k.Ko)(o.list,((e,t)=>((0,k.wg)(),(0,k.j4)(i,{key:t,"before-close":o.beforeClose},(0,k.Nv)({left:(0,k.w5)((()=>[(0,k.Wm)(r,{square:"",type:"primary",style:{height:"100% !important"},text:e.Sort>1?"取消置顶":"置顶",onClick:t=>o.nextTop(e.Id)},null,8,["text","onClick"])])),default:(0,k.w5)((()=>[(0,k.Wm)(f,{onClick:t=>o.onNoteDetail(e.Id)},{default:(0,k.w5)((()=>[(0,k.Wm)(b,{span:"24"},{default:(0,k.w5)((()=>[(0,k._)("p",U,(0,j.zw)(e.Title),1),(0,k._)("p",null,[(0,k.Uk)((0,j.zw)(e.CreateTime),1),(0,k.wy)((0,k._)("span",E,"置顶",512),[[N.F8,e.Sort>1]])])])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},[o.showSwitchBtn?{name:"right",fn:(0,k.w5)((()=>[(0,k.Wm)(r,{square:"",style:{height:"100% !important"},text:"隐藏",onClick:t=>o.preDelItem(e.Id),type:"danger",class:"delete-button"},null,8,["onClick"])]))}:void 0]),1032,["before-close"])))),128))])),_:1},8,["loading","finished","onLoad"])])),_:1},8,["modelValue","onRefresh"])],64)}n(1643);var $=n(1514),z=n(253);const q={name:"NotesView",props:{Date:{type:Object,default:()=>({Year:0,Month:0,Day:0})},IsAll:Boolean,Keywords:String,ShowNavBar:{type:Boolean,default:()=>!0}},emits:{openNotedetail:null},setup(e,t){const n=(0,_.tv)(),o=(0,F.oR)(),a=(0,A.iH)(!1),c=(0,A.iH)([]),l=(0,A.iH)(!1),r=(0,A.iH)(!1);var b=0;const f=()=>{setTimeout((()=>{(0,Z.Z)("刷新成功"),b=1,c.value=[],console.log("getNoteListByPage5"),v(b,20),a.value=!1}),1e3)},i=()=>{b+=1,console.log("getNoteListByPage6"),v(b,20)};let u=0;const d=e=>{u=e,console.log(u)};let h=0;const g=e=>{h=e,console.log(h)},m=e=>{e.Sort>1?o.dispatch("updateNoteSort",{Id:e.Id,Sort:1}).then((e=>{e.rowsAffected>0&&(b=1,c.value=[],console.log("getNoteListByPage7"),v(b,20),setTimeout((function(){(0,Z.Z)("已取消置顶")}),300))})).catch((e=>{Z.Z.fail("取消置顶失败："+e)})):o.dispatch("updateNoteSort",{Id:e.Id,Sort:Date.now()}).then((e=>{e.rowsAffected>0&&(b=1,c.value=[],console.log("getNoteListByPage1"),v(b,20),setTimeout((function(){(0,Z.Z)("已置顶")}),300))})).catch((e=>{Z.Z.fail("置顶失败："+e)}))},p=({position:e})=>{switch(e){case"left":return new Promise((()=>{for(let e=0;e<c.value.length;e++){const t=c.value[e];if(t.Id==h){m(t);break}}}));case"cell":case"outside":return!0;case"right":return new Promise((()=>{$.Z.confirm({title:"确定删除吗？"}).then((()=>{o.dispatch("delNote",u).then(((e,t)=>{if(e.rowsAffected>0){for(let e=0;e<c.value.length;e++){const t=c.value[e];if(t.Id==u){c.value.splice(e,1);break}}(0,s.Z)({type:"success",message:"已删除",position:"bottom"})}else Z.Z.fail("删除失败："+t)}))})).catch((()=>{}))}))}};(0,k.dl)((()=>{const e=o.state.RefreshListState;console.log("store.state.RefreshListState:"+o.state.RefreshListState),e&&(c.value=[],b=1,console.log("getNoteListByPage2"),v(b,20))})),(0,k.YP)((()=>e.Date),((e,t)=>{console.log(JSON.stringify(e),JSON.stringify(t)),c.value=[],b=1,console.log("getNoteListByPage3"),v(b,20)}),{deep:!0}),(0,k.YP)((()=>e.Keywords),((e,t)=>{console.log(JSON.stringify(e),JSON.stringify(t)),c.value=[],b=1,console.log("getNoteListByPage4"),v(b,20)}),{deep:!0});const v=(t,n)=>{r.value=!1,console.log(t+", "+n+", "+e.Date.Year+", "+e.Date.Month+", "+e.Date.Day+", "+e.Keywords),o.dispatch("getNoteListByPage",{pageIndex:t,pageSize:n,Year:e.Date.Year,Month:e.Date.Month,Day:e.Date.Day,State:e.IsAll?0:1,kw:e.Keywords}).then((e=>{var t=e;console.log("getNoteListByPage=>"+JSON.stringify(t));for(let n=0;n<t.length;n++)c.value.push(t[n]);l.value=!1,0==t.length&&(r.value=!0)}))},w=e=>{console.log(e),t.emit("openNotedetail",{Id:e}),n.push({path:"/AddNote",query:{Id:e}})},y=(0,A.iH)(e.ShowNavBar),{height:S}=(0,z.iP)(),I=(0,A.iH)(S.value+"px");return{Refresh:a,onRefresh:f,list:c,onLoad:i,loading:l,finished:r,onNoteDetail:w,preDelItem:d,beforeClose:p,vheight:I,nextTop:g,showNavbar:y,showSwitchBtn:!e.IsAll}}},J=()=>{(0,N.sj)((e=>({"6e47ed1f":e.vheight})))},G=q.setup;q.setup=G?(e,t)=>(J(),G(e,t)):J;var Q=q;const X=(0,W.Z)(Q,[["render",K]]);var ee=X;const te={class:"content",ref:"root"},ne={class:"category-name"},oe={class:"note-content"};function ae(e,t,n,o,a,c){const l=(0,k.up)("van-nav-bar"),r=(0,k.up)("van-icon"),b=(0,k.up)("van-popover"),f=(0,k.up)("van-cell"),i=(0,k.up)("rich-text");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k.Wm)(l,{title:o.PageTitle,"left-text":"返回","right-text":"保存","left-arrow":"",onClickLeft:o.onClickLeft,onClickRight:o.onClickRight},null,8,["title","onClickLeft","onClickRight"]),(0,k._)("div",te,[(0,k.wy)((0,k._)("input",{type:"text",class:"title",placeholder:"标题","onUpdate:modelValue":t[0]||(t[0]=e=>o.title=e)},null,512),[[N.nr,o.title]]),(0,k.Wm)(f,{class:"date-info",title:o.createTime,"onUpdate:title":t[2]||(t[2]=e=>o.createTime=e),icon:"calendar-o"},{"right-icon":(0,k.w5)((()=>[(0,k.Wm)(b,{placement:"left-start",show:o.showPopover,"onUpdate:show":t[1]||(t[1]=e=>o.showPopover=e),actions:o.actions,onSelect:o.onSelect},{reference:(0,k.w5)((()=>[(0,k.Wm)(r,{size:"22px",name:"label-o"}),(0,k._)("label",ne,(0,j.zw)(o.categoryName),1),(0,k.Wm)(r,{class:"arrow-down",size:"20px",name:"arrow-down"})])),_:1},8,["show","actions","onSelect"])])),_:1},8,["title"]),(0,k._)("div",oe,[(0,k.Wm)(i,{onGetValue:o.getValue,value:o.tmepContent},null,8,["onGetValue","value"])])],512)],64)}function ce(){const e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),a=e.getHours(),c=e.getMinutes();return[t,"年",n,"月",o,"日 ",a,":",c].join("")}function le(){return Date.now()}function re(e,t){return t>12&&(t=12),t<0&&(t=1),1==t?(e-=1,t=12):t-=1,{Year:e,Month:t}}function be(e,t){return t>12&&(t=12),t<0&&(t=1),12==t?(e+=1,t=1):t+=1,{Year:e,Month:t}}const fe={class:"tooltip"},ie=(0,k._)("span",null,"A",-1),se=[ie];function ue(e,t,n,o,a,c){const l=(0,k.up)("van-icon");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k._)("div",{class:"richText",contenteditable:"true",onBlur:t[0]||(t[0]=(...e)=>o.blurRichText&&o.blurRichText(...e)),ref:"richDiv"},null,544),(0,k._)("div",fe,[(0,k._)("button",{onClick:t[1]||(t[1]=e=>o.changeFont("B"))},"B"),(0,k._)("button",{class:"under",onClick:t[2]||(t[2]=e=>o.changeFont("U"))},"U"),(0,k._)("button",{onClick:t[3]||(t[3]=e=>o.changeFont("I"))},"I"),(0,k._)("button",{onClick:t[4]||(t[4]=e=>o.changeFont("L"))},[(0,k.Wm)(l,{name:"link-o"})]),(0,k._)("button",{class:"fontColor",onClick:t[5]||(t[5]=e=>o.changeFont("A"))},"A"),(0,k._)("button",{class:"backFontColor",onClick:t[6]||(t[6]=e=>o.changeFont("AB"))},se)])],64)}var de={name:"RichText",props:{value:String},emits:{getValue:null},setup(e,t){const n=(0,A.iH)("");(0,k.YP)((()=>e.value),((e,t)=>{l.value.innerHTML=e}),{deep:!0});const o=e=>{console.log(e),t.emit("getValue",{html:e.target.innerHTML,text:e.target.innerText})},a=()=>{t.emit("getValue",{html:l.value.innerHTML,text:l.value.innerText})},c=e=>{if("B"==e)document.execCommand("Bold",!1,null);else if("U"==e)document.execCommand("Underline",!1,null);else if("I"==e)document.execCommand("Italic",!1,null);else if("L"==e){const e=window.getSelection();e.rangeCount>0&&document.execCommand("CreateLink",!1,e.toString())}else"A"==e?document.execCommand("ForeColor",!1,"#ff4d4f"):"AB"==e&&document.execCommand("BackColor",!1,"#40a9ff");a()},l=(0,A.iH)(null);return{richDiv:l,content:n,blurRichText:o,changeFont:c}}};const he=(0,W.Z)(de,[["render",ue]]);var ge=he;const me={name:"AddNoteView",components:{RichText:ge},setup(){const e=(0,F.oR)(),t=(0,_.yj)();(0,k.bv)((()=>{e.commit("SelectTabBar",1),console.log("加载")})),(0,k.Ah)((()=>{e.commit("SelectTabBar",-1),console.log("卸载")})),(0,k.dl)((()=>{console.log("addNote onActivated")}));const n=e=>(e=e??"",e.length>0&&e.length>50&&(e=e.substring(0,50)),e),o=()=>{e.commit("setRefreshListState",!1),history.back()},a=()=>{if(0==u.value.length){if(0==h.value.length)return void Z.Z.fail("请输入内容");u.value=n(v.value)}if(s.value>0)e.dispatch("updateNote",{Id:s.value,Title:u.value,Category:d.value,Content:h.value}).then((t=>{t.rowsAffected>0&&((0,Z.Z)("保存成功"),e.commit("setRefreshListState",!0))})).catch((e=>{Z.Z.fail("保存失败："+e)}));else{const t=new Date,n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate();e.dispatch("addNote",{Id:s.value,Title:u.value,Category:d.value,Content:h.value,CreateTime:g.value,Year:n,Month:o,Day:a,timestamp:Date.now()}).then((t=>{console.log(JSON.stringify(t)),t.rowsAffected>0&&((0,Z.Z)("添加成功"),s.value=t.insertId,e.commit("setRefreshListState",!0))})).catch((e=>{Z.Z.fail("添加失败："+e)}))}},c=(0,A.iH)(!1),l=[{text:"生活",icon:"add-o"},{text:"工作",icon:"music-o"},{text:"旅游",icon:"more-o"}],r=e=>{d.value=e.text},{height:b}=(0,z.iP)(),f=(0,A.iH)(),i=(0,A.iH)(b+"px");(0,k.bv)((()=>{const e=(0,z.EL)(f);i.value=b.value-e.height-50+"px"}));const s=(0,A.iH)(t.query.Id??0),u=(0,A.iH)(""),d=(0,A.iH)("未分类"),h=(0,A.iH)(""),g=(0,A.iH)(ce()),m=(0,A.iH)("添加笔记"),p=(0,A.iH)("");s.value&&(m.value="编辑笔记",e.dispatch("getNoteById",s.value).then((e=>{const t=e;u.value=t.Title,d.value=t.Category,h.value=t.Content,p.value=t.Content,g.value=t.CreateTime})).catch((e=>{console.log("查询笔记失败："+e),Z.Z.fail("查询笔记失败："+e)})));const v=(0,A.iH)(""),w=e=>{console.log(e.text,e.html),h.value=e.html,v.value=e.text};return{getValue:w,onClickLeft:o,onClickRight:a,PageTitle:m,title:u,categoryName:d,content:h,tmepContent:p,createTime:g,actions:l,showPopover:c,onSelect:r,root:f,vheight:i,Id:s}}},pe=()=>{(0,N.sj)((e=>({"01c9c8e8":e.vheight})))},ve=me.setup;me.setup=ve?(e,t)=>(pe(),ve(e,t)):pe;var we=me;const ye=(0,W.Z)(we,[["render",ae]]);var Se=ye;function Ie(e,t,n,o,a,c){const l=(0,k.up)("van-icon"),r=(0,k.up)("router-link"),b=(0,k.up)("van-nav-bar"),f=(0,k.up)("van-calendar"),i=(0,k.up)("notes-view"),s=(0,k.up)("van-popup");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k.Wm)(b,{title:"日历",onClickRight:o.clickRightEvent},{right:(0,k.w5)((()=>[(0,k.Wm)(r,{to:"/Search"},{default:(0,k.w5)((()=>[(0,k.Wm)(l,{name:"search",size:"18"})])),_:1})])),_:1},8,["onClickRight"]),(0,k.Wm)(f,{"show-title":!1,"show-subtitle":!1,color:"#1989fa","min-date":o.minDate,"max-date":o.maxDate,poppable:!1,"show-confirm":!1,formatter:o.formatter,onSelect:o.SelectDate,onMonthShow:o.monthShow},{"top-info":(0,k.w5)((e=>[(0,k.wy)((0,k.Wm)(l,{class:"tips",color:"red",name:"bookmark"},null,512),[[N.F8,e.topInfo>0]])])),_:1},8,["min-date","max-date","formatter","onSelect","onMonthShow"]),(0,k.Wm)(s,{show:o.showPopup,"onUpdate:show":t[0]||(t[0]=e=>o.showPopup=e),onClickOverlay:o.cancelPop,onClickCloseIcon:o.cancelPop,closeable:"",position:"bottom",style:{height:"80%"}},{default:(0,k.w5)((()=>[(0,k.Wm)(i,{Date:o.DateObj,IsAll:!0,onOpenNotedetail:o.openNotedetail},null,8,["Date","onOpenNotedetail"])])),_:1},8,["show","onClickOverlay","onClickCloseIcon"])],64)}const De={lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,92821,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,41680,53584,62034,54560],solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],Gan:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],Zhi:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],Animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],festival:{"1-1":{title:"元旦节"},"2-14":{title:"情人节"},"5-1":{title:"劳动节"},"5-4":{title:"青年节"},"6-1":{title:"儿童节"},"9-10":{title:"教师节"},"10-1":{title:"国庆节"},"12-25":{title:"圣诞节"},"3-8":{title:"妇女节"},"3-12":{title:"植树节"},"4-1":{title:"愚人节"},"5-12":{title:"护士节"},"7-1":{title:"建党节"},"8-1":{title:"建军节"},"12-24":{title:"平安夜"}},lFestival:{"12-30":{title:"除夕"},"1-1":{title:"春节"},"1-15":{title:"元宵节"},"2-2":{title:"龙抬头"},"5-5":{title:"端午节"},"7-7":{title:"七夕节"},"7-15":{title:"中元节"},"8-15":{title:"中秋节"},"9-9":{title:"重阳节"},"10-1":{title:"寒衣节"},"10-15":{title:"下元节"},"12-8":{title:"腊八节"},"12-23":{title:"北方小年"},"12-24":{title:"南方小年"}},getFestival(){return this.festival},getLunarFestival(){return this.lFestival},setFestival(e={}){this.festival=e},setLunarFestival(e={}){this.lFestival=e},solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],sTermInfo:["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],nStr1:["日","一","二","三","四","五","六","七","八","九","十"],nStr2:["初","十","廿","卅"],nStr3:["正","二","三","四","五","六","七","八","九","十","冬","腊"],lYearDays:function(e){let t,n=348;for(t=32768;t>8;t>>=1)n+=this.lunarInfo[e-1900]&t?1:0;return n+this.leapDays(e)},leapMonth:function(e){return 15&this.lunarInfo[e-1900]},leapDays:function(e){return this.leapMonth(e)?65536&this.lunarInfo[e-1900]?30:29:0},monthDays:function(e,t){return t>12||t<1?-1:this.lunarInfo[e-1900]&65536>>t?30:29},solarDays:function(e,t){if(t>12||t<1)return-1;const n=t-1;return 1===n?e%4===0&&e%100!==0||e%400===0?29:28:this.solarMonth[n]},toGanZhiYear:function(e){var t=(e-3)%10,n=(e-3)%12;return 0===t&&(t=10),0===n&&(n=12),this.Gan[t-1]+this.Zhi[n-1]},toAstro:function(e,t){const n="魔羯水瓶双鱼白羊金牛双子巨蟹狮子处女天秤天蝎射手魔羯",o=[20,19,21,21,21,22,23,23,23,23,22,22];return n.substr(2*e-(t<o[e-1]?2:0),2)+"座"},toGanZhi:function(e){return this.Gan[e%10]+this.Zhi[e%12]},getTerm:function(e,t){if(e<1900||e>2100||t<1||t>24)return-1;const n=this.sTermInfo[e-1900],o=[];for(let a=0;a<n.length;a+=5){const e=parseInt("0x"+n.substr(a,5)).toString();o.push(e[0],e.substr(1,2),e[3],e.substr(4,2))}return parseInt(o[t-1])},toChinaMonth:function(e){if(e>12||e<1)return-1;let t=this.nStr3[e-1];return t+="月",t},toChinaDay:function(e){let t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=this.nStr2[Math.floor(e/10)],t+=this.nStr1[e%10]}return t},getAnimal:function(e){return this.Animals[(e-4)%12]},solar2lunar:function(e,t,n){let o,a=parseInt(e),c=parseInt(t),l=parseInt(n);if(a<1900||a>2100)return-1;if(1900===a&&1===c&&l<31)return-1;o=a?new Date(a,parseInt(c)-1,l):new Date;let r,b=0,f=0;a=o.getFullYear(),c=o.getMonth()+1,l=o.getDate();let i=(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate())-Date.UTC(1900,0,31))/864e5;for(r=1900;r<2101&&i>0;r++)f=this.lYearDays(r),i-=f;i<0&&(i+=f,r--);let s=new Date,u=!1;s.getFullYear()===a&&s.getMonth()+1===c&&s.getDate()===l&&(u=!0);let d=o.getDay(),h=this.nStr1[d];0===d&&(d=7);const g=r;b=this.leapMonth(r);let m=!1;for(r=1;r<13&&i>0;r++)b>0&&r===b+1&&!1===m?(--r,m=!0,f=this.leapDays(g)):f=this.monthDays(g,r),!0===m&&r===b+1&&(m=!1),i-=f;0===i&&b>0&&r===b+1&&(m?m=!1:(m=!0,--r)),i<0&&(i+=f,--r);const p=r,v=i+1,w=c-1,y=this.toGanZhiYear(g),S=this.getTerm(a,2*c-1),I=this.getTerm(a,2*c);let D=this.toGanZhi(12*(a-1900)+c+11);l>=S&&(D=this.toGanZhi(12*(a-1900)+c+12));let C=!1,T=null;S===l&&(C=!0,T=this.solarTerm[2*c-2]),I===l&&(C=!0,T=this.solarTerm[2*c-1]);const x=Date.UTC(a,w,1,0,0,0,0)/864e5+25567+10,N=this.toGanZhi(x+l-1),k=this.toAstro(c,l),M=a+"-"+c+"-"+l,L=g+"-"+p+"-"+v,Y=this.festival,P=this.lFestival,O=c+"-"+l;let Z=p+"-"+v;return 12===p&&29===v&&29===this.monthDays(g,p)&&(Z="12-30"),{date:M,lunarDate:L,festival:Y[O]?Y[O].title:null,lunarFestival:P[Z]?P[Z].title:null,lYear:g,lMonth:p,lDay:v,Animal:this.getAnimal(g),IMonthCn:(m?"闰":"")+this.toChinaMonth(p),IDayCn:this.toChinaDay(v),cYear:a,cMonth:c,cDay:l,gzYear:y,gzMonth:D,gzDay:N,isToday:u,isLeap:m,nWeek:d,ncWeek:"星期"+h,isTerm:C,Term:T,astro:k}},lunar2solar:function(e,t,n,o){e=parseInt(e),t=parseInt(t),n=parseInt(n),o=!!o;const a=this.leapMonth(e);if(o&&a!==t)return-1;if(2100===e&&12===t&&n>1||1900===e&&1===t&&n<31)return-1;const c=this.monthDays(e,t);let l=c;if(o&&(l=this.leapDays(e,t)),e<1900||e>2100||n>l)return-1;let r,b=0;for(r=1900;r<e;r++)b+=this.lYearDays(r);let f=0,i=!1;for(r=1;r<t;r++)f=this.leapMonth(e),i||f<=r&&f>0&&(b+=this.leapDays(e),i=!0),b+=this.monthDays(e,r);o&&(b+=c);const s=Date.UTC(1900,1,30,0,0,0),u=new Date(864e5*(b+n-31)+s),d=u.getUTCFullYear(),h=u.getUTCMonth()+1,g=u.getUTCDate();return this.solar2lunar(d,h,g)}},Ce={name:"CalendarView",components:{NotesView:ee},setup(){const e=(0,_.tv)(),t=(0,F.oR)(),n=(0,A.iH)("100%"),{height:o}=(0,z.iP)(),a=(0,A.qj)({}),c=async(e,n)=>{const o=await t.dispatch("getNoteListNearMonth",{Year:e,Month:n});console.log("getNoteListNearMonth=>"+JSON.stringify(o));var c=[],l=[],r=[];const b=re(e,n),f=be(e,n);for(let t=0;t<o.length;t++){const a=o[t];a.Year==e&&a.Month==n?c.push(a):a.Year==b.Year&&a.Month==b.Month?l.push(a):a.Year==f.Year&&a.Month==f.Month&&r.push(a)}a[`${e}-${n}`]=c,a[`${b.Year}-${b.Month}`]=l,a[`${f.Year}-${f.Month}`]=r};c((new Date).getFullYear(),(new Date).getMonth()+1),(0,k.bv)((()=>{n.value=o.value-80+"px"}));const l=(0,k.Fl)((()=>e=>{const t=new Date(e.date),n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate(),c=t.getDay();0!==c&&6!==c||(e.className="weekendRed");const l=De.solar2lunar(n,o,a),r=new Date,b=r.getFullYear(),f=r.getMonth()+1,i=r.getDate();return n==b&&o==f&&a==i&&(e.className+=" today"),null!=l.festival&&""!=l.festival?e.bottomInfo=l.festival:null!=l.Term&&""!=l.Term?e.bottomInfo=l.Term:null!=l.IDayCn&&""!=l.IDayCn&&(e.bottomInfo=l.IDayCn),m(e,n,o,a),e})),r=(0,A.iH)(!1),b=(0,A.qj)({Year:0,Month:0,Day:0}),f=e=>{const t=new Date(e),n=t.getFullYear(),o=t.getMonth()+1,a=t.getDate();console.log([n,o,a].join("-")),b.Year=n,b.Month=o,b.Day=a,console.log(JSON.stringify(b)),r.value=!0,i()},i=()=>{const e={title:"title",url:"/Calendar"};window.history.pushState(e,e.title,e.url)};window.addEventListener("popstate",(()=>{console.log("popstate"),u.value&&r.value&&(r.value=!1)}),!1);const s=()=>{console.log("cancelPop"),r.value&&e.back()},u=(0,A.iH)(!1);(0,k.dl)((()=>{if(console.log("Cale actived"),u.value=!0,t.commit("SelectTabBar",-1),t.commit("SelectTabBar",-1),0==b.Year){const e=new Date;b.Year=e.getFullYear(),b.Month=e.getMonth()+1,b.Day=e.getDate()}c(b.Year,b.Month),console.log("historyNote",d.value.length),d.value.length>0&&(console.log("showPop",r.value),d.value=[],setTimeout((()=>{r.value=!0}),100))})),(0,k.se)((()=>{console.log("deactived"),u.value=!1}));const d=(0,A.iH)([]),h=e=>{console.log("openNotedetail",JSON.stringify(e)),d.value.push(e.Id)},g=e=>{console.log("monthShow"),console.log(JSON.stringify(e)),c(e.date.getFullYear(),e.date.getMonth()+1)},m=(e,t,n,o)=>{var c=a[`${t}-${n}`];if(c&&c.length>0)for(let a=0;a<c.length;a++){const t=c[a];if(t.Day==o){e.topInfo=1;break}}else e.topInfo=0},p=new Date,v=()=>{console.log("click right")};return{vheight:n,minDate:new Date(p.getFullYear()-3,0,1),maxDate:new Date(p.getFullYear()+3,11,31),formatter:l,SelectDate:f,monthShow:g,showPopup:r,DateObj:b,cancelPop:s,openNotedetail:h,clickRightEvent:v}}},Te=()=>{(0,N.sj)((e=>({f59725f6:e.vheight})))},xe=Ce.setup;Ce.setup=xe?(e,t)=>(Te(),xe(e,t)):Te;var Ne=Ce;const ke=(0,W.Z)(Ne,[["render",Ie]]);var Me=ke;const Le={class:"setting"};function Ye(e,t,n,o,a,c){const l=(0,k.up)("van-nav-bar"),r=(0,k.up)("van-switch"),b=(0,k.up)("van-cell"),f=(0,k.up)("van-cell-group");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k.Wm)(l,{title:"设置"}),(0,k._)("div",Le,[(0,k.Wm)(f,{inset:""},{default:(0,k.w5)((()=>[(0,k.Wm)(b,{title:"开启指纹验证",size:"large"},{"right-icon":(0,k.w5)((()=>[(0,k.Wm)(r,{modelValue:o.switchChecked,"onUpdate:modelValue":[t[0]||(t[0]=e=>o.switchChecked=e),o.onUpdateValue]},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})])],64)}var Pe={name:"SettingView",setup(){const e=(0,F.oR)(),t=(0,A.iH)(!1),n=n=>{console.log("newValue",n),$.Z.confirm({title:"提醒",message:n?"是否开启指纹验证？":"是否关闭指纹验证？"}).then((()=>{t.value=n,e.commit("setLocalItem",{key:e.state.localFingerKey,val:n})})).catch((()=>{t.value=!n}))};(0,k.dl)((()=>{o()}));const o=async()=>{var n=await e.getters.getLocalItem(e.state.localFingerKey);console.log("getLocalItem",n,typeof n),t.value="true"===n};return{switchChecked:t,onUpdateValue:n}}};const Oe=(0,W.Z)(Pe,[["render",Ye]]);var Ze=Oe;const Ae={class:"list-header"},_e={class:"list-data"};function Fe(e,t,n,o,a,c){const l=(0,k.up)("van-nav-bar"),r=(0,k.up)("van-search"),b=(0,k.up)("van-dropdown-item"),f=(0,k.up)("van-dropdown-menu"),i=(0,k.up)("notes-view");return(0,k.wg)(),(0,k.iD)(k.HY,null,[(0,k._)("div",Ae,[(0,k.Wm)(l,{title:"搜索笔记","left-text":"返回","left-arrow":"",onClickLeft:o.onClickLeft},null,8,["onClickLeft"]),(0,k.Wm)(r,{modelValue:o.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchKeyword=e),onSearch:o.onSearch,placeholder:"请输入搜索关键词"},null,8,["modelValue","onSearch"]),(0,k.Wm)(f,{"active-color":"#ee0a24"},{default:(0,k.w5)((()=>[(0,k.Wm)(b,{modelValue:o.selValue1,"onUpdate:modelValue":t[1]||(t[1]=e=>o.selValue1=e),options:o.option1},null,8,["modelValue","options"]),(0,k.Wm)(b,{modelValue:o.selValue2,"onUpdate:modelValue":t[2]||(t[2]=e=>o.selValue2=e),options:o.option2},null,8,["modelValue","options"])])),_:1})]),(0,k._)("div",_e,[(0,k.Wm)(i,{ShowNavBar:!1,Keywords:o.confirmSearchKeyword,IsAll:!0},null,8,["Keywords"])])],64)}var Re={name:"Search",components:{NotesView:ee},setup(){const e=(0,F.oR)();(0,k.bv)((()=>{console.log("SelectTabBar加载")})),(0,k.Ah)((()=>{console.log("SelectTabBar卸载")})),(0,k.dl)((()=>{console.log("onActivated Search"),e.commit("SelectTabBar",1)}));const t=()=>{history.back()},n=(0,A.iH)(""),o=(0,A.iH)(""),a=e=>{o.value=n.value},c=(0,A.iH)(0),l=(0,A.iH)("a"),r=[{text:"全部分类",value:0},{text:"新款分类",value:1},{text:"活动分类",value:2}],b=[{text:"默认排序",value:"a"},{text:"时间正序",value:"b"},{text:"时间倒序",value:"c"}];return{onClickLeft:t,searchKeyword:n,confirmSearchKeyword:o,onSearch:a,selValue1:c,selValue2:l,option1:r,option2:b}}};const Ve=(0,W.Z)(Re,[["render",Fe]]);var We=Ve;const He=[{path:"/",name:"NotesView",component:ee},{path:"/AddNote",name:"AddNoteView",components:{NewNote:Se}},{path:"/Calendar",name:"CalendarView",component:Me},{path:"/Search",name:"SearchView",components:{SearchNote:We}},{path:"/Setting",name:"SettingView",component:Ze}],Be=(0,_.p7)({history:(0,_.PO)(""),routes:He});var je=Be,Ue={PreTabbarIndex:0,CurTabbarIndex:0,database:{},RefreshListState:!1,localFingerKey:"openFingerprint"};function Ee(e){return!(1==e.CurTabbarIndex)}function Ke(){return e=>localStorage.getItem(e)}function $e(e,t){t<0?(e.CurTabbarIndex=e.PreTabbarIndex,e.PreTabbarIndex=0):(e.PreTabbarIndex=e.CurTabbarIndex,e.CurTabbarIndex=t)}function ze(e,t){e.database=t}function qe(e,t){e.RefreshListState=t}function Je(e,t){localStorage.setItem(t.key,t.val)}function Ge(e){return new Promise((t=>{e=e||"default_database_db";const n="browser"===window.cordova.platformId?window.openDatabase(e,"1.0","Data",2097152):window.sqlitePlugin.openDatabase({name:e+".db",location:"default",androidDatabaseImplementation:2});t(n)}))}function Qe(e,t){if(null==e||null==t)return"";var n=t.tableName,o=t.fields;if(""==n||null==n||void 0==n)return"";Object.prototype.hasOwnProperty.call(o,"Id")||(o["Id"]="integer");var a=[];for(let r in o)"Id"!=r?a.push('"'+r+'" '+o[r]+","):a.push('"Id" integer NOT NULL PRIMARY KEY AUTOINCREMENT,');let c=a.length,l=a[c-1];return a[c-1]=l.substring(0,l.lastIndexOf(",")),new Promise(((t,o)=>{e.transaction((function(e){const o='CREATE TABLE IF NOT EXISTS "'+n+'" ( \n                '+a.join(" ")+" \n            )";console.log("SQL===> "+o),e.executeSql(o,[],((e,n)=>{t(n),n.rowsAffected>0&&console.log("fileinfo 创建成功")}))}),(function(e){console.log("transaction error: "+e.message),o("transaction error: "+e.message)}),(function(){console.log("resolve transaction ok")}))}))}function Xe(e){return!!e&&("text"!=e.toLowerCase()&&"blob"!=e.toLowerCase())}function et(e,t,n,o){var a=t.tableName,c=t.fields,l="";if("object"==typeof n){for(let e in n)Xe(c[e])?l+=e+" = "+n[e]+" and ":l+=e+" = '"+n[e]+"' and ";l=l.substring(0,l.lastIndexOf("and"))}else"string"==typeof n&&(l=n);var r="";if("object"==typeof o){for(let e in o)Xe(c[e])?r+=e+" = "+o[e]+" , ":r+=e+" = '"+o[e]+"' , ";r=r.substring(0,r.lastIndexOf(","))}else"string"==typeof o&&(r=o);return new Promise(((t,n)=>{e.transaction((function(e){var o="";o=""==r?"delete from "+a+" WHERE "+l:"update "+a+" set "+r+" WHERE "+l,console.log("SQL===> "+o),e.executeSql(o,[],(function(e,n){t({rowsAffected:n.rowsAffected})}),(function(e,t){console.log("DELETE error: "+t.message),n("DELETE  error: "+t.message)}))}),(function(e){console.log("transaction error: "+e.message)}),(function(){console.log("transaction ok")}))}))}function tt(e,t,n,o){var a=t.tableName,c=t.fields,l="";if("object"==typeof n){delete n.State;for(let e in n)Xe(c[e])?l+=e+" = "+n[e]+" and ":l+=e+" = '"+n[e]+"' and ";l=l.substring(0,l.lastIndexOf("and"))}else"string"==typeof n&&(l=n);var r="";if("object"==typeof o){for(let e in o)Xe(c[e])?r+=e+" = "+o[e]+" , ":r+=e+" = '"+o[e]+"' , ";r=r.substring(0,r.lastIndexOf(","))}else"string"==typeof o&&(r=o);return new Promise(((t,n)=>{e.transaction((function(e){var o="update "+a+" set "+r+" WHERE "+l;console.log("SQL===> "+o),e.executeSql(o,[],(function(e,n){t({rowsAffected:n.rowsAffected})}),(function(e,t){console.log("update error: "+t.message),n("update  error: "+t.message)}))}),(function(e){console.log("transaction error: "+e.message)}),(function(){console.log("transaction ok")}))}))}function nt(e,t,n){var o=t.tableName,a="",c="",l=[];if("object"==typeof n){delete n.Id;for(let e in n)a+=e+" , ",c+="?,",l.push(n[e]);a=a.substring(0,a.lastIndexOf(",")),c=c.substring(0,c.lastIndexOf(","))}return new Promise(((t,n)=>{e.transaction((function(e){var r="INSERT INTO "+o+" ("+a+") VALUES ("+c+")";console.log("SQL===> "+r+"   data:("+l.join(",")+")"),e.executeSql(r,l,(function(e,n){t(n)}),(function(e,t){console.log("INSERT error: "+t.message),n("INSERT error: "+t.message)}))}),(function(e){console.log("transaction error: "+e.message)}),(function(){console.log("transaction ok")}))}))}function ot(e,t,n,o,a){var c=t.tableName,l=t.fields,r="";for(let f in l)r+=f+",";o&&(o.endsWith(",")?r+=o:r+=o+","),r=r.substring(0,r.lastIndexOf(","));var b="";if("object"==typeof n){for(let e in n)Xe(l[e])?b+=e+" = "+n[e]+" and ":b+=e+" = '"+n[e]+"' and ";b=b.substring(0,b.lastIndexOf("and"))}else"string"==typeof n&&(b=n);return a=a?" order by "+a:"",new Promise(((t,n)=>{e.transaction((e=>{const n="select "+r+" from "+c+" where "+b+" "+a;console.log("SQL===> "+n),e.executeSql(n,[],((e,n)=>{for(var o={},a=0;a<n.rows.length;a++){o=n.rows.item(a);break}t(o)}))}),(function(e){n(e.message)}),(function(){}))}))}function at(e,t,n,o,a,c){var l=t.tableName,r=t.fields,b="";for(let d in r)b+=d+",";o&&(o.endsWith(",")?b+=o:b+=o+","),b=b.substring(0,b.lastIndexOf(","));var f="";if("object"==typeof n){for(let e in n)Xe(r[e])?f+=e+" = "+n[e]+" and ":f+=e+" = '"+n[e]+"' and ";f=f.substring(0,f.lastIndexOf("and"))}else"string"==typeof n&&(f=n);0==f.trim().length&&(f=" 1 = 1 "),a=a?" order by "+a:" order by Id asc ";var i="";if(c&&"object"==typeof c&&Object.prototype.hasOwnProperty.call(c,"pageIndex")&&Object.prototype.hasOwnProperty.call(c,"pageSize")){var s=c.pageIndex,u=c.pageSize;s<1&&(s=1),s=(s-1)*u,i=" limit "+s+","+u}return new Promise(((t,n)=>{e.transaction((e=>{const n="select "+b+" from "+l+" where "+f+" "+a+" "+i;console.log("SQL===> "+n),e.executeSql(n,[],((e,n)=>{for(var o=[],a=0;a<n.rows.length;a++)o.push(n.rows.item(a));t(o)}))}),(function(e){n(e.message)}),(function(){}))}))}const ct={tableName:"note",fields:{Id:"integer",Title:"text",Category:"text",Content:"text",CreateTime:"text",State:"integer",Year:"integer",Month:"integer",Day:"integer",Sort:"integer",Timestamp:"integer"}},lt={tableName:"note_version",fields:{Version:"text",Timestamp:"integer",Des:"text",CreateTime:"text",Info1:"text",Info2:"text",Info3:"text",State:"integer",Sort:"integer"}};function rt(e,t){return new Promise(((n,o)=>{ot(e.state.database,ct,{Id:t},"").then((e=>{n(e)})).catch((e=>{o(e)}))}))}function bt(e,{Year:t,Month:n,Date:o}){return new Promise(((a,c)=>{var l="count(1) as cnt";ot(e.state.database,{tableName:ct.tableName,fields:[]},`Year =${t} and Month=${n} and Day=${o}`,l).then((e=>{for(var t=0,n=0;n<e.rows.length;n++){t=e.rows.item(n).cnt;break}a(t)})).catch((e=>{c(e)}))}))}function ft(e,{pageIndex:t=1,pageSize:n=20,Year:o=0,Month:a=0,Day:c=0,State:l=0,kw:r=""}){return new Promise(((b,f)=>{var i={pageIndex:t,pageSize:n},s={};l>0&&(s.State=l),o>0&&(s.Year=o),a>0&&(s.Month=a),c>0&&(s.Day=c);var u="";for(let e in s)it(ct.fields[e])?u+=e+" = "+s[e]+" and ":u+=e+" = '"+s[e]+"' and ";console.log("kw:",r,typeof r,void 0!==r&&r.trim().length>0),void 0!==r&&r.trim().length>0&&(u+=" ( Title like '%"+r+"%'  OR Content like '%"+r+"%'  ) and "),u=u.substring(0,u.lastIndexOf("and")),at(e.state.database,ct,u,"","Sort desc,Timestamp desc",i).then((e=>{b(e)})).catch((e=>{f(e)}))}))}function it(e){return!!e&&("text"!=e.toLowerCase()&&"blob"!=e.toLowerCase())}function st(e,{Year:t,Month:n}){return new Promise(((o,a)=>{const c=re(t,n),l=be(t,n);at(e.state.database,ct,`(Year = ${c.Year} and Month=${c.Month} or Year = ${t} and Month=${n} or Year = ${l.Year} and Month=${l.Month})`,"","Year desc,Month desc").then((e=>{o(e)})).catch((e=>{a(e)}))}))}function ut(e,{Title:t,Category:n,Content:o,CreateTime:a,Year:c,Month:l,Day:r,timestamp:b}){return new Promise(((f,i)=>{nt(e.state.database,ct,{Id:0,Title:t,Category:n,Content:o,CreateTime:a,Year:c,Month:l,Day:r,State:1,Sort:1,Timestamp:b}).then((e=>{f(e)})).catch((e=>{i(e)}))}))}function dt(e,{Id:t,Title:n,Category:o,Content:a}){return new Promise(((c,l)=>{const r=le();tt(e.state.database,ct,{Id:t},{Title:n,Category:o,Content:a,Timestamp:r,State:1}).then((e=>{c(e)})).catch((e=>{l(e)}))}))}function ht(e,{Id:t,Sort:n}){return new Promise(((o,a)=>{tt(e.state.database,ct,{Id:t},{Sort:n,State:1}).then((e=>{o(e)})).catch((e=>{a(e)}))}))}function gt(e,t){return new Promise(((n,o)=>{et(e.state.database,ct,{Id:t},{State:0}).then((e=>{n(e)})).catch((e=>{o(e)}))}))}function mt(e){return new Promise((t=>{document.addEventListener("deviceready",(()=>{Ge("MyDatabase").then((n=>{const o=n;e.commit("setDatabase",o),Qe(o,ct).then((e=>{e.rowsAffected>0&&console.log("fileinfo 创建成功")})).catch((e=>{console.log(e)})),Qe(o,lt).then((e=>{e.rowsAffected>0&&console.log("version 创建成功")})).catch((e=>{console.log(e)})),t(o)}))}))}))}var pt=(0,F.MT)({state:Ue,getters:o,mutations:a,actions:c,modules:{}});n(5110);const vt=(0,N.ri)(B);vt.use(pt),vt.use(je),vt.use(x.Z),vt.use(T.Z),vt.use(C.Z),vt.use(D.Z),vt.use(I.Z),vt.use(S.Z),vt.use(y.Z),vt.use(w.Z),vt.use(v.Z),vt.use(p.Z),vt.use(y.Z),vt.use(m.Z),vt.use(g.Z),vt.use(h.Z),vt.use(d.Z),vt.use(u.Z),vt.use(s.Z),vt.use(i.Z),vt.use(f.Z),vt.use(b.Z),vt.use(r.Z),vt.use(l.Z),vt.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var c=t[o]={exports:{}};return e[o](c,c.exports,n),c.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,c){if(!o){var l=1/0;for(i=0;i<e.length;i++){o=e[i][0],a=e[i][1],c=e[i][2];for(var r=!0,b=0;b<o.length;b++)(!1&c||l>=c)&&Object.keys(n.O).every((function(e){return n.O[e](o[b])}))?o.splice(b--,1):(r=!1,c<l&&(l=c));if(r){e.splice(i--,1);var f=a();void 0!==f&&(t=f)}}return t}c=c||0;for(var i=e.length;i>0&&e[i-1][2]>c;i--)e[i]=e[i-1];e[i]=[o,a,c]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,c,l=o[0],r=o[1],b=o[2],f=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(b)var i=b(n)}for(t&&t(o);f<l.length;f++)c=l[f],n.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return n.O(i)},o=self["webpackChunkvue"]=self["webpackChunkvue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5347)}));o=n.O(o)})();
//# sourceMappingURL=app.0f4edb78.js.map